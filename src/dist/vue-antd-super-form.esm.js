import{Input as e,InputNumber as t,Cascader as r,AutoComplete as a,Rate as n,Slider as o,Switch as i,DatePicker as s,TimePicker as c,Button as u,Select as p,Radio as l,Checkbox as d,Steps as v,Upload as f,Table as h,List as b}from"ant-design-vue";var g=["click","change","blur","focus","hoverChange","keyDown","select","ok","pressEnter"];var m={input:e,inputnumber:t,textarea:e.TextArea,password:e.Password,cascader:r,autocomplete:a,rate:n,slider:o,switch:i,datepicker:s,rangepicker:s.RangePicker,monthpicker:s.MonthPicker,weekpicker:s.WeekPicker,timepicker:c,button:u,select:p,radio:l.Group,radiogroup:l.Group,radiobutton:l,checkbox:d.Group,checkboxgroup:d.Group,steps:v,upload:f,uploaddragger:f.Dragger},y=Object.prototype.toString,S=function(e){var t={},r={},a=Object.assign({},e);return Object.keys(a).forEach(function(e){var t=a[e];"[object Undefined]"!==y.call(t)&&""!==t&&("[object String]"==y.call(t)?""!==(t=t.trim())&&(r[e]=t):r[e]=t)}),Object.keys(r).map(function(e){e.includes(",")||(t[e]=r[e])}),t},k=function(e){if("[object Object]"===y.call(e))return Object.keys(e).map(function(t){return{label:e[t],value:t}});if("[object Array]"===y.call(e))return e;throw new Error("need obj or array")};function O(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===t.indexOf(a)&&(r[a]=e[a]);return r}function j(e,t,r){var a=e.type;void 0===a&&(a="defaultType");var n=function(e,t){var r=Object.assign({},e,{on:{}});return g.forEach(function(a){e.on&&e.on[a]&&(r.on[a]=function(){for(var r,n=[],o=arguments.length;o--;)n[o]=arguments[o];return(r=e.on)[a].apply(r,n.concat([t]))})}),r}(y=O(e,["type"]),t),o=a.toLocaleLowerCase(),i=m[o],s=null;switch(o){case"button":var c=n.autoSearchEvent,u=n.on;void 0===u&&(u={});var p=n.buttonType,l=n.text,d=n.style,v=y=O(n,["autoSearchEvent","on","buttonType","text","style"]);if(c)if(u.click){var f=u.click;u.click=function(e){f(e,t),c(t)}}else u.click=function(e){c(t)};s=r(i,{style:d,props:Object.assign({},{type:p},v),on:u},[l]);break;case"input":case"inputnumber":case"password":case"textarea":case"switch":case"slider":case"datepicker":case"rangepicker":case"monthpicker":case"weekpicker":case"timepicker":case"cascader":case"autocomplete":case"rate":var h=n.style,b=n.on;void 0===b&&(b={});var y=O(n,["style","on"]);s=r(i,{style:h,on:b,props:y});break;case"checkbox":case"radio":case"checkboxgroup":case"radiogroup":var S=n.options;void 0===S&&(S=[]);var j=n.style,F=n.on;void 0===F&&(F={});var w=y=O(n,["options","style","on"]);s=r(i,{style:j,on:F,props:Object.assign({},{options:k(S)},w)});break;case"select":case"mentions":var x=n.options;void 0===x&&(x=[]);var _=n.style,z=n.on;void 0===z&&(z={});var E=y=O(n,["options","style","on"]);s=r(i,{style:_,on:z,props:Object.assign({},E)},k(x).map(function(e){return r(i.Option,{props:{key:e.key||e.value,value:e.value}},[e.label])}));break;case"uploaddragger":case"upload":var P=n.innerHTML,D=n.style,C=n.on;void 0===C&&(C={});var T=y=O(n,["innerHTML","style","on"]);s=r(i,{style:D,on:C,props:Object.assign({},T)},[P&&P()]);break;case"radiobutton":var $=n.options;void 0===$&&($=[]);var M=n.style,L=n.on;void 0===L&&(L={});var N=y=O(n,["options","style","on"]);s=r(i.Group,{style:M,on:L,props:Object.assign({},N)},k($).map(function(e){return r(i.Button,{props:{key:e.key||e.value,value:e.value}},[e.label])}));break;case"steps":var I=n.options;void 0===I&&(I=[]);var V=n.style,G=n.on;void 0===G&&(G={});var A=y=O(n,["options","style","on"]);s=r(i,{style:V,on:G,props:Object.assign({},A)},k(I).map(function(e){return r(i.Step,{props:Object.assign({},{key:e.key||e.title},e)})}));break;default:s=r("input",{props:{placeholder:"default element"}})}return s}function F(){return{props:{layout:String,formLayout:Object,data:[Array,Function],_bindForm:Function,autoSearchEvent:Function},data:function(){return{form:this.$form.createForm(this)}},beforeMount:function(){var e=this.$props._bindForm;void 0===e&&(e=function(){}),e(this.form)},render:function(e){var t=this.$props,r=t.formLayout,a=t.layout;void 0===a&&(a="horizontal");var n=t.data;void 0===n&&(n=[]);var o=t.autoSearchEvent,i=this.form,s=i.getFieldDecorator,c=r||("horizontal"===a?{labelCol:{span:6},wrapperCol:{span:14}}:{});return e("a-form",{props:{form:this.form,layout:a,form:this.form}},[this._renderElement(e,c,i,s,o,this._transFuncToObj(n,i))])},methods:{_getFieldsValue:function(){var e=this.props.form.getFieldsValue();return S(e)},_transFuncToObj:function(e,t){return void 0===e&&(e={}),"[object Function]"===Object.prototype.toString.call(e)?e(t,this):e},_renderElement:function(e,t,r,a,n,o){var i=this;return void 0===o&&(o=[]),o.map(function(o,s){var c=o.visible;void 0===c&&(c=!0);var u=o.label,p=o.extra;void 0===p&&(p=null);var l=o.hasFeedback;void 0===l&&(l=!1);var d=o.formItemLayout;void 0===d&&(d={});var v=o.unbind,f=o.key;void 0===f&&(f="random_key_"+Math.random());var h=o.config;void 0===h&&(h={});var b=o.render,g=o.renderFix,m=o.bindSearch;void 0===m&&(m=!1);var y=o.type,S=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===t.indexOf(a)&&(r[a]=e[a]);return r}(o,["visible","label","extra","hasFeedback","formItemLayout","unbind","key","config","render","renderFix","bindSearch","type"]),k=null;if(!1!==c){if("br"===y)return e("br",{key:s});if("span"===y)return e("span",{key:s,props:S},[u]);if("hidden"===y)return e("a-form-item",{style:{display:"none"},props:{key:s}},[a(f,i._transFuncToObj(h,r))(j({type:"input",hidden:!0},r,e))]);if("group"===y)k=i._renderElement(e,t,r,a,n,o.children);else if(b){var O=b(r,Form.Item)||e("input",{attrs:{placeholder:"default: render need return"}});k=!0===v?O:a(f,i._transFuncToObj(h,r))(O)}else{var F=Object.assign({},{type:y},S);m&&(F.autoSearchEvent=n);var w=j(F,r,e);k="button"===y?w:a(f,i._transFuncToObj(h,r,i))(w)}return e("a-form-item",{props:Object.assign({},{label:u,key:s,extra:p,hasFeedback:l},t,d)},[g?g(k):k])}})}}}}function w(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===t.indexOf(a)&&(r[a]=e[a]);return r}function x(e){return{props:Object.assign({},e.props,{pagination:{type:[Object,Boolean],default:!0},action:Function,params:Function,extraParams:[Function,Object],pageName:String,pageSizeName:String,valueMap:Function,actionError:Function,isInit:Boolean}),data:function(){return{list:[],totalData:0,currentPage:1,pageSizeData:10}},beforeMount:function(){this._vueinit(this.$props,this.$props.isInit)},render:function(t){var r=this,a=this.$props,n=a.pagination;void 0===n&&(n=!0);a.action,a.params,a.extraParams,a.pageName,a.pageSizeName,a.valueMap,a.actionError,a.isInit;var o=w(a,["pagination","action","params","extraParams","pageName","pageSizeName","valueMap","actionError","isInit"]),i=null;if(!1===n)i=!1;else{n.total,n.current,n.pageSize;var s=n.showSizeChanger;void 0===s&&(s=!0);var c=n.onChange;void 0===c&&(c=function(){return null});var u=n.showTotal;void 0===u&&(u=function(e,t){return t[0]+"-"+t[1]+" 条, 共 "+e+" 条"});var p=n.onShowSizeChange;void 0===p&&(p=function(){return null});var l=w(n,["total","current","pageSize","showSizeChanger","onChange","showTotal","onShowSizeChange"]);i=Object.assign({},{total:this.totalData||this.$props.total||0,current:this.currentPage,pageSize:this.pageSizeData,onChange:function(){for(var e,t=[],a=arguments.length;a--;)t[a]=arguments[a];(e=r)._pageChange.apply(e,t),c.apply(void 0,t)},showTotal:u,showSizeChanger:s,onShowSizeChange:function(e,t){r._pageChange(e,t),p(e,t)}},l)}return t(e,{props:Object.assign({},o,{dataSource:this.list||[],pagination:i})})},methods:{_vueinit:function(e,t){void 0===t&&(t=!1);var r=e.pagination;void 0===r&&(r=!0);var a=e.dataSource,n=e.total;void 0===n&&(n=0);var o=r.current;void 0===o&&(o=1);var i=r.pageSize;void 0===i&&(i=10),this.list=a,this.totalData=n,this.currentPage=o,this.pageSizeData=i,t&&this._loadData()},reset:function(e){void 0===e&&(e=!0),this._vueinit(this.$props,e)},refresh:function(){this._loadData()},_pageChange:function(e,t){void 0===e&&(e=1),void 0===t&&(t=10),this.currentPage=e,this.pageSizeData=t,this._loadData()},_loadData:function(){var e,t=this,r=this.$data,a=(r.currentPage,r.pageSizeData,this.$props),n=a.action,o=a.pageName;void 0===o&&(o="page");var i=a.pageSizeName;void 0===i&&(i="pageSize");var s=a.valueMap;void 0===s&&(s=function(e){return{status:e.status,dataSource:e.entry,total:e.totalRecordSize}});var c=a.actionError;void 0===c&&(c=function(e){return console.error(e)});var u=a.params;void 0===u&&(u=function(){return{}});var p=a.extraParams;void 0===p&&(p=function(){return{}});var l="[object Function]"===y.call(p)?p():p,d=Object.assign({},l,u(),((e={})[o]=this.currentPage,e[i]=this.pageSizeData,e));if(!n)throw new Error("need action filed");n(d).then(function(e){var r=s(e),a=r.dataSource,n=r.total;r.status?(t.list=a,t.totalData=n):c(e.message)})}}}}var _=x(h),z=x(b);var E,P={VueAntdSuperForm:(E={props:{type:String,search:Object,params:Function,autoSearchEvent:Function,_bindForm:Function,table:Object,formStyle:Object,tableStyle:Object},render:function(e){var t=this.$props,r=t.type;void 0===r&&(r="table");var a=t.search,n=t.autoSearchEvent,o=t._bindForm,i=t.table,s=t.formStyle;void 0===s&&(s={});var c=t.tableStyle;void 0===c&&(c={});var u=function(e,t){var r={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&-1===t.indexOf(a)&&(r[a]=e[a]);return r}(t,["type","search","autoSearchEvent","_bindForm","table","formStyle","tableStyle"]);return e("div",null,[e("div",{style:Object.assign({},{background:"#fff",padding:"20px","border-radius":"5px","margin-bottom":"10px"},s)},[e(F(),{props:Object.assign({},a,{autoSearchEvent:n,_bindForm:o})})]),e("div",{style:Object.assign({},{background:"#fff",padding:"20px","border-radius":"5px","margin-bottom":"10px"},c)},[e("table"===r?_:z,{ref:"list",props:Object.assign({},i,u)})])])},methods:{reset:function(e){void 0===e&&(e=!0),this.$refs.list.reset(e)},refresh:function(){this.$refs.list.refresh()}}},{props:Object.assign({},E.props),beforeMount:function(){this.form=null},render:function(e){var t=this,r=Object.assign({},this.$props,{params:function(){return t._getSearchParams()},autoSearchEvent:function(){return t.reset()},_bindForm:function(e){t.form=e}});return e(E,{ref:"hoc",props:r})},methods:{reset:function(e){void 0===e&&(e=!0),this.$refs.hoc.reset(e)},refresh:function(){this.$refs.hoc.refresh()},_getSearchParams:function(){return S(this.form.getFieldsValue())}}}),Form:F(),List:z,Table:_};var D={install:function e(t){e.installed||(e.installed=!0,Object.keys(P).forEach(function(e){t.component(e,P[e])}))}},C=null;"undefined"!=typeof window?C=window.Vue:"undefined"!=typeof global&&(C=global.Vue),C&&C.use(D);export default D;export{P as components};
